<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rock, Paper, Scissors prototype</title>
</head>  
<body>
  <div id=playingArea>
    <h1>Rock, Paper, Scissors</h1>
    <h2>You vs. the Computer: First one to 5 victories wins!</h2>
    <h3>Make your choice</h3>
    <button id='rockbtn' class="btn">Rock</button>
    <button id='paperbtn' class="btn">Paper</button>
    <button id='scissorsbtn' class="btn">Scissors</button>
  </div>
  <div id=results-container>

  </div>
<script>
  let computerScore = 0;
  let playerScore = 0;
  let numOfTies = 0;
  let playerSelection = "";
  let resultsContainer = document.querySelector('#results-container');

  const buttons = document.querySelectorAll('button');  
  buttons.forEach((button) => {
    button.addEventListener('click', function(e) {
      playerSelection = e.target.textContent;
      playerSelection = playerSelection.toLowerCase();
      playRound();
    });
  });
  
  function computerPlay() {
      const choice = Math.floor(Math.random()*3);
      if (choice == 0) {
        return "rock";
      } else if (choice == 1) {
        return "paper";
      } else {
        return "scissors";
      }
    }

  let resultText = "";
  
  function playRound() {
    const roundResult = document.createElement('div'); 
    const computerSelection = computerPlay();
    if (!playerSelection) {
      roundResult.textContent = "Game canceled. You lose without even trying!";
    } else {
      switch(true) {
        case (playerSelection == computerSelection):
          roundResult.textContent = `Computer also chooses ${computerSelection}. It's a tie!`
          break;
        case (playerSelection == 'rock' && computerSelection == 'paper'):
          roundResult.textContent = "Computer chooses paper. You lose. Paper covers rock."
          break;
        case (playerSelection == 'rock' && computerSelection == 'scissors'):
          roundResult.textContent = "Computer chooses scissors. You win! Rock crushes scissors."
          break;
        case (playerSelection == 'paper' && computerSelection == 'rock'):
          roundResult.textContent = "Computer chooses rock. You win! Paper covers rock."
          break;
        case (playerSelection == 'paper' && computerSelection == 'scissors'):
          roundResult.textContent = "Computer chooses scissors. You lose. Scissors cuts paper."
          break;
        case (playerSelection == 'scissors' && computerSelection == 'rock'):
          roundResult.textContent = "Computer chooses rock. You lose. Rock crushes scissors."
          break;
        case (playerSelection == 'scissors' && computerSelection == 'paper'):
          roundResult.textContent = "Computer chooses paper. You win! Scissors cuts paper."
          break;
        default:
          roundResult.textContent = "Invalid selection. You lose.";    
      }
    resultsContainer.appendChild(roundResult);
    resultText = roundResult.textContent;
    updateScore();
    }
  }

  function updateScore() {
    if (resultText.indexOf("You win") > -1) {
      playerScore++; 
    } else if (resultText.indexOf("You lose") > -1) {
      computerScore++;
    } else {
      numOfTies++;
    }
    const currentScoreDiv = document.createElement('div');
    currentScoreDiv.textContent = `The score is -- You: ${playerScore}, Computer: ${computerScore}, Ties: ${numOfTies}.`;
    resultsContainer.appendChild(currentScoreDiv);
  
    if (playerScore == 5 || computerScore == 5) {
      alert(whoWins());
      computerScore = 0;
      playerScore = 0;
      numOfTies = 0;
      resultsContainer.innerHTML = "";
    };
  }

  function whoWins() {
    if(playerScore > computerScore) {
      return `You win the game! The final score was: You ${playerScore}, the Computer ${computerScore}, and Ties ${numOfTies}`;
    } else {
      return `Aw, bummer! You lose the game. The final score was: You ${playerScore}, Computer ${computerScore}, Ties ${numOfTies}.`;
    } 
  }
  </script>
</body>
</html>